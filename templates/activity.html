{% extends "base.html" %}
{% block title %}Activity{% endblock %}
{% block main_class %}full-width{% endblock %}

{% block content %}

<div style="padding: 20px;">

  <div style="max-width: 900px; margin: 0 auto;">

    <a href="/dashboard" class="link" style="display:inline-block; margin-bottom: 16px;">
      ‚Üê Back to Dashboard
    </a>

    <div style="display:flex; justify-content: space-between; align-items:center; margin-bottom: 14px;">
      <h2 style="margin: 0;">Activity</h2>

      <!-- Filters -->
      <div style="display:flex; gap: 8px;">
        <a href="/activity?type=all" class="btn {% if filter_type == 'all' %}primary{% else %}secondary{% endif %}">
          All
        </a>
        <a href="/activity?type=expense" class="btn {% if filter_type == 'expense' %}primary{% else %}secondary{% endif %}">
          Expenses
        </a>
        <a href="/activity?type=settlement" class="btn {% if filter_type == 'settlement' %}primary{% else %}secondary{% endif %}">
          Settlements
        </a>
      </div>
    </div>

    <div class="card" style="padding: 18px;">
      <p class="muted-text" style="margin: 0 0 18px 0;">
        A timeline of expenses and settlements across your groups.
      </p>

      {% if activities %}
        <div class="activity-feed">

          {% for a in activities %}
          <div class="activity-item">

            {% if a.type == "expense" %}
              <div class="activity-icon get">üí∏</div>
            {% else %}
              <div class="activity-icon owe">ü§ù</div>
            {% endif %}

            <div class="activity-details">
              <div style="display:flex; justify-content: space-between; gap: 10px;">
                <span class="activity-text">
                  <strong>{{ a.title }}</strong>
                  <div class="muted-text" style="font-size: 13px;">{{ a.subtitle }}</div>
                  <div class="muted-text" style="font-size: 12px;">{{ a.meta }}</div>
                </span>

                <span class="muted-text" style="font-size: 12px; white-space: nowrap;">
                  {{ a.time.strftime("%d %b %Y") if a.time else "" }}
                </span>
              </div>
            </div>

          </div>
          {% endfor %}

        </div>
      {% else %}
        <div style="text-align:center; padding:40px; color:#aaa;">
          <p>No activity yet.</p>
        </div>
      {% endif %}
    </div>

  </div>

</div>

{% endblock %}
