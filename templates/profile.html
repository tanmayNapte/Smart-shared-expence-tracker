{% extends "base.html" %}
{% block title %}Profile{% endblock %}
{% block main_class %}full-width{% endblock %}

{% block content %}

<div style="width: 100%; padding: 20px;">

  <!-- Back link aligned nicely -->
  <div style="max-width: 720px; margin: 0 auto 16px auto;">
    <a href="/dashboard" class="link">
      ← Back to Dashboard
    </a>
  </div>

  <!-- Center card properly -->
  <div style="display: flex; justify-content: center;">
    <div class="card" style="width: 100%; max-width: 720px;">

      <!-- TOP PROFILE HEADER -->
      <div class="card-header"
        style="justify-content: center; flex-direction: column; text-align: center; gap: 10px; padding: 28px;">

        <div style="width: 90px; height: 90px; background: #f3f4f6; border-radius: 50%;
                    display: flex; align-items: center; justify-content: center;
                    font-size: 2.2rem; font-weight: 700;">
          {{ current_user.name[0] | upper }}
        </div>

        <h2 style="margin: 0;">{{ current_user.name }}</h2>
        <p class="muted-text" style="margin: 0;">{{ current_user.email }}</p>

        <div style="margin-top: 10px;">
          {% if current_user.role == "admin" %}
            <span class="badge badge-admin">Admin</span>
          {% else %}
            <span class="badge badge-member">Member</span>
          {% endif %}
        </div>
      </div>

      <!-- STATS -->
      <div style="padding: 24px; border-top: 1px solid #eee;">
        <h3 style="margin: 0 0 14px 0;">Your Stats</h3>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">

          <div class="card" style="padding: 14px;">
            <div class="muted-text" style="font-size: 13px;">Groups</div>
            <div style="font-size: 22px; font-weight: 700;">{{ stats.groups_count }}</div>
          </div>

          <div class="card" style="padding: 14px;">
            <div class="muted-text" style="font-size: 13px;">Expenses Added</div>
            <div style="font-size: 22px; font-weight: 700;">{{ stats.expenses_count }}</div>
          </div>

          <div class="card" style="padding: 14px;">
            <div class="muted-text" style="font-size: 13px;">Total Paid</div>
            <div style="font-size: 22px; font-weight: 700;">
              ₹{{ "%.2f"|format(stats.total_paid) }}
            </div>
          </div>

          <div class="card" style="padding: 14px;">
            <div class="muted-text" style="font-size: 13px;">Total Spent</div>
            <div style="font-size: 22px; font-weight: 700;">
              ₹{{ "%.2f"|format(stats.total_spent) }}
            </div>
          </div>

          <div class="card" style="padding: 14px;">
            <div class="muted-text" style="font-size: 13px;">You Owe</div>
            <div style="font-size: 22px; font-weight: 700;">
              ₹{{ "%.2f"|format(stats.total_you_owe) }}
            </div>
          </div>

          <div class="card" style="padding: 14px;">
            <div class="muted-text" style="font-size: 13px;">You Are Owed</div>
            <div style="font-size: 22px; font-weight: 700;">
              ₹{{ "%.2f"|format(stats.total_you_are_owed) }}
            </div>
          </div>

        </div>
      </div>

      <!-- LOGOUT -->
      <div style="padding: 24px; border-top: 1px solid #eee; text-align: center;">
        <a href="/logout" class="btn logout" style="width: 100%; justify-content: center;">
          Log Out
        </a>
      </div>

    </div>
  </div>

</div>

{% endblock %}
